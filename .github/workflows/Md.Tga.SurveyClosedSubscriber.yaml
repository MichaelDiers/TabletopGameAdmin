name: BE/Md.Tga.SurveyClosedSubscriber.yaml
on:
  push:
    branches:
      - main
    paths:
      - 'backend/Md.Tga.SurveyClosedSubscriber/**'
      - '.github/workflows/Md.Tga.SurveyClosedSubscriber.yaml'
  workflow_dispatch:
jobs:
  Test:
    uses: MichaelDiers/shared-workflows/.github/workflows/deploy-google-cloud-function.yaml@main
    with:
      functionName: SurveyClosedSubscriber 
      projectName: Md.Tga.SurveyClosedSubscriber
      solutionFolder: backend/Md.Tga.SurveyClosedSubscriber
      trigger: pubsub
    secrets:
      gcpCredentials: ${{ secrets.GLOBAL_GCP_CREDENTIALS_TEST }}
      projectId: ${{ secrets.GLOBAL_PROJECT_ID_TEST }}
      subTopicName: ${{ secrets.GLOBAL_PUBSUB_TOPIC_SURVEY_CLOSED }}
      appSettingsJson: '\{\"Logging\":\{\"LogLevel\":\{\"Microsoft\":\"Error\"\}\},\"ProjectId\": \"${{ secrets.GLOBAL_PROJECT_ID_TEST }}\",\"Environment\": \"Test\"\}'

